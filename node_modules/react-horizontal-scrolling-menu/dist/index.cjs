!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["react-horizontal-scrolling-menu"]={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);const o="react-horizontal-scrolling-menu",l=`${o}--item`,s=`${o}--scroll-container`,i=`${o}--wrapper`,a=`${o}--inner-wrapper`,u=`${o}--header`,d=`${o}--arrow-left`,c=`${o}--arrow-right`,f=`${o}--footer`,h="itemId",v="data-key",m="data-index",p={first:"first",last:"last",onInit:"onInit",onUpdate:"onUpdate"},b="",g={current:null};var y=Object.freeze({__proto__:null,rootClassName:o,itemClassName:l,scrollContainerClassName:s,wrapperClassName:i,innerWrapperClassName:a,headerClassName:u,arrowLeftClassName:d,arrowRightClassName:c,footerClassName:f,id:h,dataKeyAttribute:v,dataIndexAttribute:m,events:p,emptyStr:b,emptyRef:g});class w{constructor(){this.subscribe=(e,t)=>{this.observers.set(e,(this.observers.get(e)||[]).concat(t))},this.unsubscribe=(e,t)=>{const n=(this.observers.get(e)||[]).filter((e=>e!==t));n.length?this.observers.set(e,n):this.observers.delete(e)},this.emitUpdates=(e,t)=>{const n=this.observers.get(e)||[];null==n||n.forEach((e=>e(t)))},this.updateBatch=(e,t=!0)=>{e.length&&(e.forEach((([e,t])=>this.emitUpdates(e,t))),t&&this.emitUpdates(p.onUpdate))},this.update=(e,t)=>{this.emitUpdates(e,t),this.emitUpdates(p.onUpdate)},this.observers=new Map}}class C extends Map{constructor(){super(),this.subscribe=(e,t)=>this.observer.subscribe(e,t),this.unsubscribe=(e,t)=>this.observer.unsubscribe(e,t),this.isEdgeItem=({key:e,value:t,first:n=this.first(),last:r=this.last()})=>{const o=[];return e===(null==n?void 0:n.key)?o.push([p.first,t]):e===(null==r?void 0:r.key)&&o.push([p.last,t]),o},this.edgeItemsCheck=e=>{const t=this.first(),n=this.last(),r=e.find((([e])=>e===(null==t?void 0:t.key))),o=[];r&&o.push([p.first,r[1]]);const l=e.find((([e])=>e===(null==n?void 0:n.key)));return l&&o.push([p.last,l[1]]),o},this.toArr=()=>this.sort([...this]),this.toItems=()=>this.toArr().map((([e])=>e)),this.sort=e=>e.sort((([,e],[,t])=>+e.index-+t.index)),this.set=(e,t)=>{const n=String(e),r=[[n,t]];return super.set(n,t),r.push(...this.isEdgeItem({key:n,value:t,first:this.first(),last:this.last()})),this.observer.updateBatch(r),this},this.setBatch=e=>{this.firstRun&&this.observer.update(p.onInit);const t=[...e];return this.sort(t).forEach((([e,t])=>{super.set(String(e),t)})),t.push(...this.edgeItemsCheck(t)),this.observer.updateBatch(t,!this.firstRun),this.firstRun=!1,this},this.first=()=>{var e;return null===(e=this.toArr()[0])||void 0===e?void 0:e[1]},this.last=()=>{var e,t;return null===(t=null===(e=this.toArr().slice(-1))||void 0===e?void 0:e[0])||void 0===t?void 0:t[1]},this.filter=e=>this.toArr().filter(e),this.find=e=>this.toArr().find(e),this.findIndex=e=>this.toArr().findIndex(e),this.getCurrentPos=e=>{const t=this.toArr(),n=t.findIndex((([t,n])=>t===e||n===e));return[t,n]},this.prev=e=>{var t;const[n,r]=this.getCurrentPos(e);return-1!==r?null===(t=n[r-1])||void 0===t?void 0:t[1]:void 0},this.next=e=>{var t;const[n,r]=this.getCurrentPos(e);return-1!==r?null===(t=n[r+1])||void 0===t?void 0:t[1]:void 0},this.getVisible=()=>this.filter((e=>e[1].visible)),this.observer=new w,this.firstRun=!0}}const M=e=>"object"==typeof e&&null!=e&&1===e.nodeType,E=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,I=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return E(n.overflowY,t)||E(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},k=(e,t,n,r,o,l,s,i)=>l<e&&s>t||l>e&&s<t?0:l<=e&&i<=n||s>=t&&i>=n?l-e-r:s>t&&i<n||l<e&&i>n?s-t+o:0,x=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},N=(e,t)=>{var n,r,o,l;if("undefined"==typeof document)return[];const{scrollMode:s,block:i,inline:a,boundary:u,skipOverflowHiddenElements:d}=t,c="function"==typeof u?u:e=>e!==u;if(!M(e))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,h=[];let v=e;for(;M(v)&&c(v);){if(v=x(v),v===f){h.push(v);break}null!=v&&v===document.body&&I(v)&&!I(document.documentElement)||null!=v&&I(v,d)&&h.push(v)}const m=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,p=null!=(l=null==(o=window.visualViewport)?void 0:o.height)?l:innerHeight,{scrollX:b,scrollY:g}=window,{height:y,width:w,top:C,right:E,bottom:N,left:R}=e.getBoundingClientRect(),{top:S,right:T,bottom:j,left:O}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let $="start"===i||"nearest"===i?C-S:"end"===i?N+j:C+y/2-S+j,W="center"===a?R+w/2-O+T:"end"===a?E+T:R-O;const B=[];for(let e=0;e<h.length;e++){const t=h[e],{height:n,width:r,top:o,right:l,bottom:u,left:d}=t.getBoundingClientRect();if("if-needed"===s&&C>=0&&R>=0&&N<=p&&E<=m&&C>=o&&N<=u&&R>=d&&E<=l)return B;const c=getComputedStyle(t),v=parseInt(c.borderLeftWidth,10),M=parseInt(c.borderTopWidth,10),I=parseInt(c.borderRightWidth,10),x=parseInt(c.borderBottomWidth,10);let S=0,T=0;const j="offsetWidth"in t?t.offsetWidth-t.clientWidth-v-I:0,O="offsetHeight"in t?t.offsetHeight-t.clientHeight-M-x:0,V="offsetWidth"in t?0===t.offsetWidth?0:r/t.offsetWidth:0,H="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(f===t)S="start"===i?$:"end"===i?$-p:"nearest"===i?k(g,g+p,p,M,x,g+$,g+$+y,y):$-p/2,T="start"===a?W:"center"===a?W-m/2:"end"===a?W-m:k(b,b+m,m,v,I,b+W,b+W+w,w),S=Math.max(0,S+g),T=Math.max(0,T+b);else{S="start"===i?$-o-M:"end"===i?$-u+x+O:"nearest"===i?k(o,u,n,M,x+O,$,$+y,y):$-(o+n/2)+O/2,T="start"===a?W-d-v:"center"===a?W-(d+r/2)+j/2:"end"===a?W-l+I+j:k(d,l,r,v,I+j,W,W+w,w);const{scrollLeft:e,scrollTop:s}=t;S=0===H?0:Math.max(0,Math.min(s+S/H,t.scrollHeight-n/H+O)),T=0===V?0:Math.max(0,Math.min(e+T/V,t.scrollWidth-r/V+j)),$+=s-S,W+=e-T}B.push({el:t,top:S,left:T})}return B};function R(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(N(e,t));const r="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:o,top:l,left:s}of N(e,(e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"})(t))){const e=l-n.top+n.bottom,t=s-n.left+n.right;o.scroll({top:e,left:t,behavior:r})}}let S;const T=()=>(S||(S="performance"in window?performance.now.bind(performance):Date.now),S());function j(e){const t=T(),n=Math.min((t-e.startTime)/e.duration,1),r=e.ease(n),o=e.startX+(e.x-e.startX)*r,l=e.startY+(e.y-e.startY)*r;e.method(o,l,n,r),o!==e.x||l!==e.y?requestAnimationFrame((()=>j(e))):e.cb()}function O(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>1+--e*e*e*e*e,l=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;const i=e,a=e.scrollLeft,u=e.scrollTop;j({scrollable:i,method:(t,n,r,o)=>{const l=Math.ceil(t),i=Math.ceil(n);e.scrollLeft=l,e.scrollTop=i,null==s||s({target:e,elapsed:r,value:o,left:l,top:i})},startTime:T(),startX:a,startY:u,x:t,y:n,duration:r,ease:o,cb:l})}const $=function(e,t){const n=t||{};return(e=>e&&!e.behavior||"smooth"===e.behavior)(n)?R(e,{block:n.block,inline:n.inline,scrollMode:n.scrollMode,boundary:n.boundary,skipOverflowHiddenElements:n.skipOverflowHiddenElements,behavior:e=>Promise.all(e.reduce(((e,t)=>{let{el:r,left:o,top:l}=t;const s=r.scrollLeft,i=r.scrollTop;return s===o&&i===l?e:[...e,new Promise((e=>O(r,o,l,n.duration,n.ease,(()=>e({el:r,left:[s,o],top:[i,l]})),n.onScrollChange)))]}),[]))}):Promise.resolve(R(e,t))},W=e=>Object.values(e).map((e=>e.current)).filter(Boolean);function B(e,t,n,r,o,l){var s;const i=(null===(s=null==e?void 0:e.entry)||void 0===s?void 0:s.target)||e;if(!i)return;const a={behavior:t||"smooth",inline:n||"end",block:r||"nearest"};return l?i.scrollIntoView(a):$(i,Object.assign(Object.assign({},o),a))}const V=e=>document.querySelector(`[${v}='${e}']`),H=e=>document.querySelector(`[${m}='${e}']`);function L(e){return r.default.isValidElement(e)&&e||"function"==typeof e&&r.default.createElement(e,null)||!!e&&"object"==typeof e&&r.default.createElement(e,null)||null}const U=e=>{var t;return String((null===(t=null==e?void 0:e.props)||void 0===t?void 0:t[h])||((null==e?void 0:e.key)||b).replace(/^\.\$/,b))};function A(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"current")}var P=r.default.memo((function({children:e,className:t,id:n,index:o,refs:l}){const s=r.default.useRef(null);return l[String(o)]=s,r.default.createElement("div",{className:t,[v]:n,[m]:o,ref:s},e)}));function F({children:e,itemClassName:t=b,refs:n}){const o=r.default.Children.toArray(e).filter(Boolean),s=r.default.useMemo((()=>`${l} ${t}`),[t]);return o.map(((e,t)=>{const o=U(e);return r.default.createElement(P,{className:s,id:o,key:o,refs:n,index:t},e)}))}function D({className:e=b,children:t,onScroll:n=(()=>{}),scrollRef:o,containerRef:l}){const i=r.default.useMemo((()=>`${s} ${e}`),[e]),a=r.default.useCallback((e=>{A(o)?o.current=e:o(e),A(l)?l.current=e:l(e)}),[o,l]);return r.default.createElement("div",{className:i,onScroll:n,ref:a},t)}const _=r.default.createContext({});const X="undefined"!=typeof window?r.default.useLayoutEffect:r.default.useEffect;function Y({items:e,itemsChanged:t,refs:n,options:o,wrapperVisible:l}){const s=r.default.useRef(),{schedule:i,add:a,addPriority:u,cleanup:d}=q(e,l),c=r.default.useCallback((e=>{const t=function(e,t){return[...e].map((e=>{var n,r,o,l;const s=e.target,i=String(null!==(r=null===(n=null==s?void 0:s.dataset)||void 0===n?void 0:n.key)&&void 0!==r?r:b);return[i,{index:String(null!==(l=null===(o=null==s?void 0:s.dataset)||void 0===o?void 0:o.index)&&void 0!==l?l:b),key:i,entry:e,visible:e.intersectionRatio>=t.ratio}]}))}(e,o);l.current?u(t):a(t),i()}),[o,l,u,i,a]);X((()=>{const e=W(n),t=s.current||new IntersectionObserver(c,o);return s.current=t,e.forEach((e=>t.observe(e))),()=>{t.disconnect(),s.current=void 0,d()}}),[c,t,o,n,d])}const q=(e,t)=>{const n=r.default.useRef([]),o=r.default.useRef([]),l=r.default.useRef(0),s=r.default.useRef(!1),i=r.default.useCallback((()=>t.current),[t]),a=r.default.useCallback((()=>{clearTimeout(l.current),s.current=!1}),[l,s]),u=r.default.useCallback((()=>{if(!i())return a(),void d();e.setBatch(z(n.current,K(o.current)))}),[a,n,o,i,e]),d=r.default.useCallback((()=>{s.current||(s.current=!0,l.current=setTimeout((()=>{u(),n.current=[],o.current=[],s.current=!1}),i()?0:100))}),[u,o,n,i]),c=r.default.useCallback((()=>{a(),n.current=[],o.current=[]}),[o,n,a]),f=r.default.useCallback((e=>{a(),n.current.push(...e),d()}),[n,d,a]),h=r.default.useCallback((e=>{a(),o.current.push(...e),d()}),[o,d,a]);return{schedule:d,add:f,addPriority:h,running:s,cleanup:c}},z=(e,t)=>K(e).filter((e=>!t.find((t=>t[0]===e[0])))).concat(t),K=e=>{const t=[];return e.reverse().forEach((e=>{t.find((t=>t[0]===e[0]))||t.push(e)})),t.reverse()},G=e=>r.default.Children.toArray(e).map(U).filter(Boolean);const J={ratio:.9,rootMargin:"5px",threshold:[.05,.5,.75,.95]};const Q={current:{}},Z=()=>{};e.ScrollMenu=function({LeftArrow:e,RightArrow:t,children:n,Header:o,Footer:l,transitionDuration:s=500,transitionBehavior:h,onInit:v=Z,onUpdate:m=Z,onMouseDown:y,onMouseLeave:w,onMouseUp:M,onMouseMove:E,onScroll:I=Z,onTouchMove:k,onTouchStart:x,onTouchEnd:N,onWheel:R=Z,options:S=J,scrollContainerClassName:T=b,containerRef:j=g,itemClassName:O=b,wrapperClassName:$=b,apiRef:W=Q,RTL:U,noPolyfill:P}){const q=L(e),z=L(t),K=L(o),ee=L(l),te=r.default.useRef(null),[ne]=r.default.useState({}),re=r.default.useMemo((()=>Object.assign(Object.assign(Object.assign({},J),S),{root:te.current})),[S]),oe=r.default.useRef(new C).current,le=function(e,t){const[n,o]=r.default.useState(b),l=r.default.useMemo((()=>G(e)),[e]);return r.default.useEffect((()=>{const e=l.filter(Boolean).join(b);t.toItems().filter((e=>!l.includes(e))).forEach((e=>{t.delete(e)})),o(e)}),[l,t]),n}(n,oe),se=r.default.useRef(null),ie=((e,t)=>{const n=r.default.useRef(!0),o=r.default.useMemo((()=>t+.01),[t]),l=r.default.useMemo((()=>[o-.01,o,o+.01]),[o]),s=r.default.useCallback((e=>{var t;const r=(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.intersectionRatio)>o;n.current!==r&&(n.current=r)}),[o]);return X((()=>{const t=new IntersectionObserver(s,{threshold:l});return e.current&&t.observe(e.current),()=>{t.disconnect()}}),[n,e,s,l]),n})(se,re.ratio);Y(r.default.useMemo((()=>({items:oe,itemsChanged:le,options:re,refs:ne,wrapperVisible:ie})),[oe,le,ie,ne,re]));const ae=r.default.useMemo((()=>function(e,t,n){var o,l,s;const i=!!(null===(o=e.first())||void 0===o?void 0:o.visible),a=!!(null===(l=e.last())||void 0===l?void 0:l.visible),u=t=>{var n;return null===(n=e.find((e=>e[1].key===String(t))))||void 0===n?void 0:n[1]},d=()=>{var t,n;const r=null===(n=null===(t=e.getVisible())||void 0===t?void 0:t[0])||void 0===n?void 0:n[1];return r?e.prev(r):void 0},c=()=>{var t;const n=null===(t=e.getVisible().findLast((()=>!0)))||void 0===t?void 0:t[1];return n?e.next(n):void 0},f=null===(s=null==t?void 0:t.boundary)||void 0===s?void 0:s.current;return{getItemById:u,getItemElementById:V,getItemByIndex:t=>{var n;return null===(n=e.find((e=>String(e[1].index)===String(t))))||void 0===n?void 0:n[1]},getItemElementByIndex:H,getNextElement:c,getPrevElement:d,isFirstItemVisible:i,isItemVisible:t=>e.getVisible().map((e=>e[0])).includes(String(t)),isLastItem:t=>e.last()===u(t),isLastItemVisible:a,scrollNext:(e,r,o,{duration:l,boundary:s=f}={})=>{const i=null!=e?e:null==t?void 0:t.behavior;return B(c(),i,r||"start",o||"nearest",{boundary:s,duration:null!=l?l:null==t?void 0:t.duration},n)},scrollPrev:(e,r,o,{duration:l,boundary:s=f}={})=>{const i=null!=e?e:null==t?void 0:t.behavior;return B(d(),i,r||"end",o||"nearest",{boundary:s,duration:null!=l?l:null==t?void 0:t.duration},n)},useIsVisible:(t,n=!1)=>{const[o,l]=r.default.useState(n),s=r.default.useCallback((e=>{l(!!(null==e?void 0:e.visible))}),[]);return r.default.useEffect((()=>(e.subscribe(t,s),()=>{e.unsubscribe(t,s)})),[t,s]),o},scrollToItem:(e,r,o,l,s)=>{var i;return B(e,null!=r?r:null==t?void 0:t.behavior,o,l,Object.assign(Object.assign({boundary:f},s),{duration:null!==(i=null==s?void 0:s.duration)&&void 0!==i?i:null==t?void 0:t.duration}),n)}}}(oe,{duration:s,behavior:h,boundary:te},P)),[oe,s,h,P]),ue=r.default.useCallback((()=>Object.assign(Object.assign({},ae),{items:oe,scrollContainer:te})),[ae,oe,te]),[de,ce]=r.default.useState((()=>ue()));(({context:e,onInit:t,onUpdate:n})=>{const o=r.default.useCallback((()=>t(e)),[t,e]),l=r.default.useCallback((()=>n(e)),[n,e]),{items:s}=e;r.default.useEffect((()=>(s.subscribe(p.onInit,o),s.subscribe(p.onUpdate,l),()=>{s.unsubscribe(p.onInit,o),s.unsubscribe(p.onUpdate,l)})),[s,o,l])})({context:de,onInit:v,onUpdate:m}),r.default.useEffect((()=>ce(ue())),[ue]),r.default.useEffect((()=>{A(W)?W.current=de:W(de)}),[de,W]);const fe=r.default.useCallback((e=>I(de,e)),[I,de]),he=r.default.useCallback((e=>R(de,e)),[R,de]),ve=r.default.useMemo((()=>`${i} ${$}`),[$]),me=r.default.useMemo((()=>`${T}${U?" rtl":b}`),[U,T]);return r.default.createElement("div",{className:ve,onWheel:he,onMouseDown:null==y?void 0:y(de),onMouseLeave:null==w?void 0:w(de),onMouseUp:null==M?void 0:M(de),onMouseMove:null==E?void 0:E(de),onTouchStart:null==x?void 0:x(de),onTouchMove:null==k?void 0:k(de),onTouchEnd:null==N?void 0:N(de),ref:se},r.default.createElement(_.Provider,{value:de},r.default.createElement("div",{className:u},K),r.default.createElement("div",{className:a},r.default.createElement("div",{className:d},q),r.default.createElement(D,{className:me,onScroll:fe,scrollRef:te,containerRef:j},r.default.createElement(F,{refs:ne,itemClassName:O},n)),r.default.createElement("div",{className:c},z)),r.default.createElement("div",{className:f},ee)))},e.VisibilityContext=_,e.constants=y,e.getItemsPos=e=>{var t;const n=e[Math.floor(e.length/2)];return{first:null==e?void 0:e[0],center:n,last:null===(t=e.slice(-1))||void 0===t?void 0:t[0]}},e.slidingWindow=function(e,t){return{prev:()=>function(e,t){const n=e.findIndex((e=>e===(null==t?void 0:t[0]))),r=t.length,o=n-r,l=o<0,s=l?0:o,i=e.slice(s,l?r:n);return i.length===r?i:e.slice(n,r)}(e,t),next:()=>function(e,t){const n=e.findIndex((e=>{var n;return e===(null===(n=t.slice(-1))||void 0===n?void 0:n[0])})),r=t.length,o=n+r+1,l=o>e.length-1,s=l?e.length-1:o,i=e.slice(l?s-r+1:n+1,s);return i.length===r?i:e.slice(e.length-r,e.length+r)}(e,t)}},Object.defineProperty(e,"__esModule",{value:!0})}));
